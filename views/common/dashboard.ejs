<%-include("../common/header.ejs")%>
    <%-include("../common/Navbar.ejs")%>
        <%-include("../common/Sidebar.ejs")%>

            <% if(msg !='' ) { %>
                <div class="alert alert-success msg"
                    style="position: absolute; z-index: 9999; color:rgb(36, 23, 23); background-color:  #e0d1bf; right: 10px; top: 10px;">
                    <span style="font-size: 16px;">
                        <%= msg %>
                    </span>
                </div>
                <% } %>

                    <div class="app-content content ">
                        <div class="content-overlay"></div>
                        <div class="header-navbar-shadow"></div>
                        <div class="content-wrapper container-xxl p-0">
                            <div class="content-header row">
                            </div>
                            <div class="content-body">
                                <section id="dashboard-ecommerce">
                                    <div class="row match-height">
                                        <div class="col-xl-4 col-md-6 col-12">
                                            <div class="card card-congratulation-medal">
                                                <div class="card-body">
                                                    <h5>Congratulations ðŸŽ‰ John!</h5>
                                                    <p class="card-text font-small-3">You have won gold medal</p>
                                                    <h3 class="mb-75 mt-2 pt-50">
                                                        <a href="#">$48.9k</a>
                                                    </h3>
                                                    <button type="button" class="btn btn-primary">View Sales</button>
                                                    <img src="../../../app-assets/images/illustration/badge.svg"
                                                        class="congratulation-medal" alt="Medal Pic" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xl-8 col-md-6 col-12">
                                            <div class="card card-statistics">
                                                <div class="card-header">
                                                    <h4 class="card-title">Statistics</h4>
                                                    <div class="d-flex align-items-center">
                                                        <p class="card-text font-small-2 me-25 mb-0">Updated 1 month ago
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="card-body statistics-body">
                                                    <div class="row">
                                                        <div class="col-xl-3 col-sm-6 col-12 mb-2 mb-xl-0">
                                                            <div class="d-flex flex-row">
                                                                <div class="avatar bg-light-primary me-2">
                                                                    <div class="avatar-content">
                                                                        <i data-feather="trending-up"
                                                                            class="avatar-icon"></i>
                                                                    </div>
                                                                </div>
                                                                <div class="my-auto">
                                                                    <h4 class="fw-bolder mb-0">230k</h4>
                                                                    <p class="card-text font-small-3 mb-0">Sales</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-xl-3 col-sm-6 col-12 mb-2 mb-xl-0">
                                                            <div class="d-flex flex-row">
                                                                <div class="avatar bg-light-info me-2">
                                                                    <div class="avatar-content">
                                                                        <i data-feather="user" class="avatar-icon"></i>
                                                                    </div>
                                                                </div>
                                                                <div class="my-auto">
                                                                    <h4 class="fw-bolder mb-0">8.549k</h4>
                                                                    <p class="card-text font-small-3 mb-0">Customers</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-xl-3 col-sm-6 col-12 mb-2 mb-sm-0">
                                                            <div class="d-flex flex-row">
                                                                <div class="avatar bg-light-danger me-2">
                                                                    <div class="avatar-content">
                                                                        <i data-feather="box" class="avatar-icon"></i>
                                                                    </div>
                                                                </div>
                                                                <div class="my-auto">
                                                                    <h4 class="fw-bolder mb-0">1.423k</h4>
                                                                    <p class="card-text font-small-3 mb-0">Products</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-xl-3 col-sm-6 col-12">
                                                            <div class="d-flex flex-row">
                                                                <div class="avatar bg-light-success me-2">
                                                                    <div class="avatar-content">
                                                                        <i data-feather="dollar-sign"
                                                                            class="avatar-icon"></i>
                                                                    </div>
                                                                </div>
                                                                <div class="my-auto">
                                                                    <h4 class="fw-bolder mb-0">$9745</h4>
                                                                    <p class="card-text font-small-3 mb-0">Revenue</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <div style="width: 500px;">
                                            <div id="pieChart" style="width: 100%; max-width: 500px; height: 350px;">
                                            </div>

                                        </div>
                                        <div id="barChart" style="width: 100%; max-width: 500px; height: 350px;"></div>

                                    </div>

                                </section>
                            </div>
                        </div>
                    </div>
                    <%-include("../common/Footer.ejs")%>

                        <script>
                            var dataSeries = [{
                                data: ['<%= doctor %>', '<%= patient %>']
                            }];
                            var options = {
                                series: dataSeries,
                                chart: {
                                    height: 300,
                                    type: 'bar'
                                },
                                plotOptions: {
                                    bar: {
                                        columnWidth: '30%',
                                        distributed: true
                                    }
                                },
                                dataLabels: {
                                    enabled: true
                                },
                                legend: {
                                    show: true
                                },
                                xaxis: {
                                    categories: [
                                        ['Doctor'],
                                        ['Patients'],
                                    ],
                                    labels: {
                                        style: {
                                            fontSize: '12px'
                                        }
                                    }
                                },
                                colors: ['#1E90FF', '#FF6347', '#FF6347', '#FFBF00', '#00BFFF', '#FF4500', '#ADFF2F', '#FFA500']
                            };
                            var chart = new ApexCharts(document.querySelector("#pieChart"), options);
                            chart.render();
                        </script>

                        <script>
                            let doctor = "<%-doctor%>";
                            let patient = "<%-patient%>";
                            var options = {
                                series: [parseInt(doctor), parseInt(patient)],
                                chart: {
                                    width: '100%',
                                    type: 'pie',
                                },
                                labels: ["doctor", "patient"],
                                theme: {
                                    monochrome: {
                                        enabled: false
                                    }
                                },
                                plotOptions: {
                                    pie: {
                                        dataLabels: {
                                            offset: 5
                                        }
                                    }
                                },
                                legend: {
                                    show: true,
                                    position: 'right',
                                    offsetY: 50
                                }
                            };
                            var chart = new ApexCharts(document.querySelector("#barChart"), options);
                            chart.render();
                        </script>


                        <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>